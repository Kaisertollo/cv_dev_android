---
import Layout from '../layouts/Layout.astro';
---

<Layout title="John Doe - Lead D√©veloppeur Android">
	<main>
		<button id="downloadPDF" class="download-pdf-btn">
			<span class="icon">üìÑ</span> T√©l√©charger PDF
		</button>
		<article class="cv-container">
			<div class="sidebar">
				<div class="profile">
					<div class="profile-image">JD</div>
					<h1>John Doe</h1>
					<p class="title">Lead D√©veloppeur Android</p>
					<p class="subtitle">Expert en Architecture & Performance</p>
				</div>

				<section class="contact-info">
					<h2>Contact</h2>
					<ul>
						<li>
							<span class="icon">üìç</span>
							Paris, France
						</li>
						<li>
							<span class="icon">üìß</span>
							john.doe@email.com
						</li>
						<li>
							<span class="icon">üì±</span>
							+33 6 12 34 56 78
						</li>
						<li>
							<span class="icon">üíª</span>
							github.com/johndoe
						</li>
						<li>
							<span class="icon">üîó</span>
							linkedin.com/in/johndoe
						</li>
					</ul>
				</section>

				<section class="expertise">
					<h2>Expertise Technique</h2>
					<div class="expertise-group">
						<h3>Android Core</h3>
						<ul class="expertise-list">
							<li><span class="expertise-tag advanced">Kotlin</span></li>
							<li><span class="expertise-tag advanced">Jetpack Compose</span></li>
							<li><span class="expertise-tag advanced">Coroutines & Flow</span></li>
							<li><span class="expertise-tag advanced">Clean Architecture</span></li>
						</ul>
					</div>
					<div class="expertise-group">
						<h3>Architecture</h3>
						<ul class="expertise-list">
							<li><span class="expertise-tag advanced">MVVM/MVI</span></li>
							<li><span class="expertise-tag advanced">Hilt/Dagger</span></li>
							<li><span class="expertise-tag advanced">Navigation</span></li>
							<li><span class="expertise-tag">Room</span></li>
						</ul>
					</div>
					<div class="expertise-group">
						<h3>Testing</h3>
						<ul class="expertise-list">
							<li><span class="expertise-tag advanced">JUnit</span></li>
							<li><span class="expertise-tag advanced">Espresso</span></li>
							<li><span class="expertise-tag">Mockk</span></li>
							<li><span class="expertise-tag">Robolectric</span></li>
						</ul>
					</div>
					<div class="expertise-group">
						<h3>Outils</h3>
						<ul class="expertise-list">
							<li><span class="expertise-tag advanced">Android Studio</span></li>
							<li><span class="expertise-tag advanced">Git</span></li>
							<li><span class="expertise-tag">Firebase</span></li>
							<li><span class="expertise-tag">CI/CD</span></li>
						</ul>
					</div>
				</section>

				<section class="languages">
					<h2>Langues</h2>
					<ul>
						<li>
							Fran√ßais 
							<div class="level-bar">
								<div class="level-fill" style="width: 100%"></div>
							</div>
						</li>
						<li>
							Anglais 
							<div class="level-bar">
								<div class="level-fill" style="width: 90%"></div>
							</div>
						</li>
						<li>
							Espagnol 
							<div class="level-bar">
								<div class="level-fill" style="width: 60%"></div>
							</div>
						</li>
					</ul>
				</section>
			</div>

			<div class="main-content">
				<section class="profile-summary">
					<h2>Profil</h2>
					<p>Lead D√©veloppeur Android avec 8+ ans d'exp√©rience, sp√©cialis√© dans la conception d'architectures √©volutives et la cr√©ation d'applications performantes. Expert en Kotlin et Jetpack Compose, je combine expertise technique approfondie et vision strat√©gique pour diriger des √©quipes vers l'excellence technique.</p>
				</section>

				<section class="technical-expertise">
					<h2>Expertise Technique Fondamentale</h2>
					
					<div class="expertise-item">
						<h3>Architecture & Design Patterns</h3>
						<ul>
							<li>Ma√Ætrise approfondie de Clean Architecture et des patterns MVVM/MVI</li>
							<li>Expertise en conception d'architectures modulaires avec une forte emphase sur la testabilit√©</li>
							<li>Impl√©mentation avanc√©e de Dependency Injection avec Hilt/Dagger</li>
							<li>Gestion efficace des √©tats avec Kotlin Flow et StateFlow</li>
						</ul>
					</div>

					<div class="expertise-item">
						<h3>Android Framework</h3>
						<ul>
							<li>Expertise en Jetpack Compose et Material Design 3</li>
							<li>Ma√Ætrise des composants Android Architecture (ViewModel, Navigation, Room)</li>
							<li>Optimisation du cycle de vie des composants et gestion efficace de la m√©moire</li>
							<li>Impl√©mentation de fonctionnalit√©s syst√®me avanc√©es (WorkManager, Notifications, Widgets)</li>
						</ul>
					</div>

					<div class="expertise-item">
						<h3>Performance & Optimisation</h3>
						<ul>
							<li>Profilage et optimisation des performances (CPU, m√©moire, batterie)</li>
							<li>D√©tection et r√©solution des memory leaks et ANRs</li>
							<li>Optimisation du cold start et du temps de chargement des applications</li>
							<li>Impl√©mentation de strat√©gies de mise en cache efficaces</li>
						</ul>
					</div>
				</section>

				<section class="experience">
					<h2>Exp√©rience Professionnelle</h2>
					
					<div class="experience-item">
						<div class="experience-header">
							<h3>Lead D√©veloppeur Android</h3>
							<p class="company">TechCorp, Paris</p>
							<p class="date">2020 - Pr√©sent</p>
						</div>
						<ul>
							<li>Direction technique d'une √©quipe de 6 d√©veloppeurs sur une application de 1M+ utilisateurs</li>
							<li>Migration r√©ussie vers Jetpack Compose avec 40% de r√©duction du code UI</li>
							<li>Mise en place d'une Clean Architecture avec modularisation (20+ modules)</li>
							<li>Am√©lioration de 40% des performances de d√©marrage et r√©duction de 60% des crashes</li>
							<li>Mentorat technique et mise en place de standards de code</li>
						</ul>
					</div>

					<div class="experience-item">
						<div class="experience-header">
							<h3>D√©veloppeur Android Senior</h3>
							<p class="company">MobileFirst, Lyon</p>
							<p class="date">2018 - 2020</p>
						</div>
						<ul>
							<li>Architecture et d√©veloppement d'une application de paiement s√©curis√©e</li>
							<li>Impl√©mentation d'un syst√®me de synchronisation offline robuste</li>
							<li>Mise en place d'une suite de tests compl√®te (couverture > 80%)</li>
							<li>Optimisation des performances et de la consommation batterie</li>
						</ul>
					</div>

					<div class="experience-item">
						<div class="experience-header">
							<h3>D√©veloppeur Android</h3>
							<p class="company">StartupInc, Paris</p>
							<p class="date">2015 - 2018</p>
						</div>
						<ul>
							<li>D√©veloppement from scratch d'une application e-commerce</li>
							<li>Int√©gration de syst√®mes de paiement et g√©olocalisation</li>
							<li>Mise en place des bonnes pratiques de d√©veloppement</li>
						</ul>
					</div>
				</section>

				<section class="education">
					<h2>Formation</h2>
					
					<div class="education-item">
						<div class="education-header">
							<h3>Master en Ing√©nierie Logicielle</h3>
							<p class="school">√âcole Polytechnique</p>
							<p class="date">2013 - 2015</p>
						</div>
						<p>Sp√©cialisation en d√©veloppement mobile et architectures distribu√©es</p>
						<ul>
							<li>Major de promotion</li>
							<li>Projet de fin d'√©tudes : Framework de test pour applications Android</li>
						</ul>
					</div>
				</section>

				<section class="projects">
					<h2>Projets & Contributions</h2>
					<div class="project-item">
						<h3>KotlinUtils</h3>
						<p>Biblioth√®que open-source de composants Android r√©utilisables</p>
						<ul>
							<li>2k+ stars sur GitHub</li>
							<li>Utilis√©e par 50+ applications en production</li>
							<li>Composants Compose, utilitaires Kotlin, extensions Android</li>
						</ul>
					</div>
					<div class="project-item">
						<h3>Android Dev Blog</h3>
						<p>Blog technique sur le d√©veloppement Android moderne</p>
						<ul>
							<li>5k+ lecteurs mensuels</li>
							<li>Articles sur l'architecture, la performance et les bonnes pratiques</li>
							<li>Tutorials sur Jetpack Compose et les derni√®res technologies Android</li>
						</ul>
					</div>
				</section>
			</div>
		</article>
	</main>
</Layout>

<script is:inline src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script>
	document.getElementById('downloadPDF').addEventListener('click', async function() {
		const element = document.querySelector('.cv-container');
		
		// Configuration simple pour √©viter les erreurs
		const opt = {
			margin: 0,
			filename: 'cv.pdf',
			image: { type: 'jpeg', quality: 0.98 },
			html2canvas: { 
				scale: 2,
				useCORS: true,
				letterRendering: true,
				scrollY: 0
			},
			jsPDF: { 
				unit: 'mm', 
				format: 'a4', 
				orientation: 'portrait'
			}
		};

		try {
			// Utilisation de la m√©thode simple
			await html2pdf().from(element).set(opt).save();
		} catch (error) {
			console.error('Error generating PDF:', error);
		}
	});
</script>

<style>
	.cv-container {
		width: 210mm;
		margin: 0 auto;
		background: white;
		display: grid;
		grid-template-columns: 300px 1fr;
		box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
		position: relative;
		overflow: visible;
		min-height: auto;
	}

	.sidebar {
		background: linear-gradient(145deg, #1976D2, #2196F3);
		color: white;
		padding: 2rem;
		position: relative;
	}

	.main-content {
		padding: 2rem;
		background: white;
		position: relative;
	}

	@media print {
		body {
			margin: 0;
			padding: 0;
			background: white;
			-webkit-print-color-adjust: exact !important;
			print-color-adjust: exact !important;
		}

		.cv-container {
			width: 210mm !important;
			margin: 0 !important;
			padding: 0 !important;
			grid-template-columns: 80mm 1fr !important;
			box-shadow: none !important;
			position: relative !important;
			overflow: visible !important;
		}

		.sidebar {
			padding: 15mm 10mm !important;
			background: linear-gradient(145deg, #1976D2, #2196F3) !important;
			-webkit-print-color-adjust: exact !important;
			print-color-adjust: exact !important;
		}

		.main-content {
			padding: 15mm !important;
		}

		section {
			page-break-inside: avoid !important;
		}
	}

	/* Styles de base */
	.profile {
		text-align: center;
		margin-bottom: 2.5rem;
	}

	.profile-image {
		width: 140px;
		height: 140px;
		background: white;
		color: #1976D2;
		border-radius: 70px;
		margin: 0 auto 1.2rem;
		display: flex;
		align-items: center;
		justify-content: center;
		font-size: 3rem;
		font-weight: bold;
		box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
	}

	.profile h1 {
		font-size: 2rem;
		margin: 0;
		color: white;
		text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
	}

	.profile .title {
		font-size: 1.2rem;
		opacity: 0.95;
		margin: 0.5rem 0 0.2rem;
		font-weight: 500;
	}

	.profile .subtitle {
		font-size: 0.9rem;
		opacity: 0.8;
		margin: 0;
	}

	.sidebar h2 {
		color: white;
		font-size: 1.3rem;
		margin: 2rem 0 1rem;
		border-bottom: 2px solid rgba(255, 255, 255, 0.2);
		padding-bottom: 0.5rem;
		text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
	}

	.sidebar h3 {
		color: white;
		font-size: 1.1rem;
		margin: 1.2rem 0 0.8rem;
		opacity: 0.9;
	}

	.contact-info ul {
		list-style: none;
		padding: 0;
		margin: 0;
	}

	.contact-info li {
		margin-bottom: 1rem;
		display: flex;
		align-items: center;
		gap: 0.8rem;
		font-size: 0.95rem;
	}

	.icon {
		font-size: 1.3rem;
		opacity: 0.9;
	}

	.expertise-list {
		list-style: none;
		padding: 0;
		display: flex;
		flex-wrap: wrap;
		gap: 0.8rem;
		margin: 0.5rem 0;
	}

	.expertise-tag {
		background: rgba(255, 255, 255, 0.12);
		padding: 0.5rem 1rem;
		border-radius: 25px;
		font-size: 0.9rem;
		transition: all 0.2s ease;
		display: inline-block;
		box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
		backdrop-filter: blur(5px);
		border: 1px solid rgba(255, 255, 255, 0.1);
	}

	.expertise-tag.advanced {
		background: rgba(255, 255, 255, 0.2);
		font-weight: 500;
		border: 1px solid rgba(255, 255, 255, 0.3);
		box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
	}

	.languages ul {
		list-style: none;
		padding: 0;
	}

	.languages li {
		margin-bottom: 1rem;
	}

	.level-bar {
		height: 6px;
		background: rgba(255, 255, 255, 0.2);
		border-radius: 3px;
		margin-top: 0.4rem;
		overflow: hidden;
	}

	.level-fill {
		height: 100%;
		background: rgba(255, 255, 255, 0.8);
		border-radius: 3px;
		transition: width 0.3s ease;
	}

	.main-content h2 {
		color: #1976D2;
		font-size: 1.6rem;
		margin: 0 0 1.2rem;
		border-bottom: 2px solid #e0e0e0;
		padding-bottom: 0.6rem;
	}

	.experience-item, .education-item, .project-item, .expertise-item {
		margin-bottom: 2rem;
	}

	.experience-header, .education-header {
		margin-bottom: 0.8rem;
	}

	.experience-header h3, .education-header h3 {
		color: #2c3e50;
		font-size: 1.2rem;
		margin: 0;
	}

	.company, .school {
		color: #1976D2;
		font-weight: 600;
		margin: 0.3rem 0;
		font-size: 1.1rem;
	}

	.date {
		color: #666;
		font-size: 0.9rem;
		margin: 0;
	}

	.main-content ul {
		margin: 0.8rem 0;
		padding-left: 1.2rem;
	}

	.main-content li {
		margin-bottom: 0.5rem;
		line-height: 1.5;
		color: #444;
	}

	.profile-summary p {
		line-height: 1.7;
		color: #2c3e50;
		font-size: 1.1rem;
	}

	.project-item h3 {
		color: #2c3e50;
		font-size: 1.2rem;
		margin: 0 0 0.4rem;
	}

	.project-item p {
		margin: 0 0 0.5rem;
		color: #666;
		font-size: 1rem;
	}

	section {
		margin-bottom: 2.5rem;
	}

	section:last-child {
		margin-bottom: 0;
	}

	.download-pdf-btn {
		position: fixed;
		bottom: 2rem;
		right: 2rem;
		background: #2563eb;
		color: white;
		border: none;
		padding: 0.75rem 1.5rem;
		border-radius: 0.5rem;
		cursor: pointer;
		display: flex;
		align-items: center;
		gap: 0.5rem;
		font-size: 1rem;
		box-shadow: 0 2px 4px rgba(0,0,0,0.1);
		transition: transform 0.2s, background 0.2s;
		z-index: 1000;
	}

	.download-pdf-btn:hover {
		background: #1d4ed8;
		transform: translateY(-2px);
	}

	.download-pdf-btn .icon {
		font-size: 1.2rem;
	}

	@media print {
		.download-pdf-btn {
			display: none;
		}
	}
</style>